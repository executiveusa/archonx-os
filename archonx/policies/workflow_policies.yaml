# ArchonX Workflow Policies
# PAULIWHEEL compliance mappings for all 42 workflow contracts.

policies:
  critical:
    description: "Workflows requiring human approval before execution."
    workflows:
      - WF-001
      - WF-002
      - WF-008
      - WF-009
      - WF-019
      - WF-036
    compliance_level: PAULIWHEEL_CRITICAL
    timeout_seconds: 3600
    required_role: approver
    audit_required: true
    escalation_on_timeout: true

  high:
    description: "High-impact workflows with strict validation requirements."
    workflows:
      - WF-003
      - WF-005
      - WF-006
      - WF-015
      - WF-016
      - WF-017
      - WF-018
      - WF-041
    compliance_level: PAULIWHEEL_HIGH
    timeout_seconds: 1800
    required_role: operator
    audit_required: true
    escalation_on_timeout: false

  medium:
    description: "Standard operational workflows with normal governance."
    workflows:
      - WF-004
      - WF-007
      - WF-010
      - WF-011
      - WF-012
      - WF-013
      - WF-014
      - WF-020
      - WF-021
      - WF-022
      - WF-023
      - WF-024
      - WF-025
      - WF-026
      - WF-027
      - WF-028
      - WF-029
      - WF-030
      - WF-031
      - WF-032
      - WF-033
      - WF-034
      - WF-035
      - WF-037
    compliance_level: PAULIWHEEL_MEDIUM
    timeout_seconds: 900
    required_role: operator
    audit_required: false
    escalation_on_timeout: false

  low:
    description: "Routine maintenance and observability workflows."
    workflows:
      - WF-038
      - WF-039
      - WF-040
      - WF-042
    compliance_level: PAULIWHEEL_LOW
    timeout_seconds: 300
    required_role: operator
    audit_required: false
    escalation_on_timeout: false

escalation:
  primary: tech_lead
  secondary: engineering_manager
  emergency: cto
  channels:
    - slack
    - email
    - pagerduty

roles:
  approver:
    description: "Senior human reviewer with authority to approve/reject phase gates and critical operations."
    permissions:
      - phase_gate_approval
      - phase_gate_rejection
      - emergency_pause
      - merge_to_main
      - rollback_trigger
      - credential_update
    workflows:
      - WF-001
      - WF-002
      - WF-008
      - WF-009
      - WF-019
      - WF-036

  operator:
    description: "Standard operations role with access to all non-critical workflows."
    permissions:
      - bead_execution_start
      - bead_status_report
      - build_checkpoint
      - test_suite_run
      - coverage_report
      - agent_telemetry
      - dashboard_update
      - alert_dispatch
      - devika_task_receive
      - context7_fetch
      - code_generation
      - test_execution
      - build_validation
      - approval_gate_check
      - execution_report
      - subagent_spawn
      - subagent_status
      - ralphy_coordination
      - dependency_resolution
      - parallel_execution
      - result_consolidation
      - error_handling
      - retry_logic
      - timeout_management
      - agent_communication
      - approval_gate_ui
      - dashboard_refresh
      - telemetry_update
      - manual_intervention
      - config_change
      - report_generation
      - health_check
      - monitoring_alert
      - log_aggregation
      - compliance_audit
      - archive_cleanup
    workflows:
      - WF-003
      - WF-004
      - WF-005
      - WF-006
      - WF-007
      - WF-010
      - WF-011
      - WF-012
      - WF-013
      - WF-014
      - WF-015
      - WF-016
      - WF-017
      - WF-018
      - WF-020
      - WF-021
      - WF-022
      - WF-023
      - WF-024
      - WF-025
      - WF-026
      - WF-027
      - WF-028
      - WF-029
      - WF-030
      - WF-031
      - WF-032
      - WF-033
      - WF-034
      - WF-035
      - WF-037
      - WF-038
      - WF-039
      - WF-040
      - WF-041
      - WF-042

compliance_levels:
  PAULIWHEEL_CRITICAL:
    description: "Maximum governance. Human approval mandatory. Full audit trail."
    approval_required: true
    audit_required: true
    max_automation_level: 0

  PAULIWHEEL_HIGH:
    description: "High governance. Automated but fully audited with alert on failure."
    approval_required: false
    audit_required: true
    max_automation_level: 2

  PAULIWHEEL_MEDIUM:
    description: "Standard governance. Automated with structured logging."
    approval_required: false
    audit_required: false
    max_automation_level: 4

  PAULIWHEEL_LOW:
    description: "Minimal governance. Automated with basic telemetry only."
    approval_required: false
    audit_required: false
    max_automation_level: 5
